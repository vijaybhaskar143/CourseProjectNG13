{"ast":null,"code":"import _classCallCheck from \"C:\\\\ABC\\\\Angular13\\\\CourseProject\\\\CourseProject-Ol\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\ABC\\\\Angular13\\\\CourseProject\\\\CourseProject-Ol\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { ComponentFactoryResolver } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from './auth.service';\nimport { AlertComponent } from '../shared/alert/alert.component';\nimport { PlaceholderDirective } from '../shared/placeholder/placeholder.directive';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../shared/placeholder/placeholder.directive\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../shared/loading-spinner/loading-spinner.component\";\nimport * as i6 from \"@angular/forms\";\n\nfunction AuthComponent_ng_template_0_Template(rf, ctx) {}\n\nfunction AuthComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵelement(1, \"app-loading-spinner\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AuthComponent_form_4_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 6, 7);\n    i0.ɵɵlistener(\"ngSubmit\", function AuthComponent_form_4_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n\n      var _r3 = i0.ɵɵreference(1);\n\n      var ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.onSubmit(_r3);\n    });\n    i0.ɵɵelementStart(2, \"div\", 8)(3, \"label\", 9);\n    i0.ɵɵtext(4, \"E-Mail\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"input\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 8)(7, \"label\", 11);\n    i0.ɵɵtext(8, \"Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\")(11, \"button\", 13);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \" | \");\n    i0.ɵɵelementStart(14, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function AuthComponent_form_4_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r5);\n      var ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.onSwitchMode();\n    });\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    var _r3 = i0.ɵɵreference(1);\n\n    var ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"disabled\", !_r3.valid);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.isLoginMode ? \"Login\" : \"Sign Up\", \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Switch to \", ctx_r2.isLoginMode ? \"Sign Up\" : \"Login\", \" \");\n  }\n}\n\nexport var AuthComponent = /*#__PURE__*/function () {\n  function AuthComponent(authService, router, componentFactoryResolver) {\n    _classCallCheck(this, AuthComponent);\n\n    this.authService = authService;\n    this.router = router;\n    this.componentFactoryResolver = componentFactoryResolver;\n    this.isLoginMode = true;\n    this.isLoading = false;\n    this.error = null;\n  }\n\n  _createClass(AuthComponent, [{\n    key: \"onSwitchMode\",\n    value: function onSwitchMode() {\n      this.isLoginMode = !this.isLoginMode;\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(form) {\n      var _this = this;\n\n      if (!form.valid) {\n        return;\n      }\n\n      var email = form.value.email;\n      var password = form.value.password;\n      var authObs;\n      this.isLoading = true;\n\n      if (this.isLoginMode) {\n        authObs = this.authService.login(email, password);\n      } else {\n        authObs = this.authService.signup(email, password);\n      }\n\n      authObs.subscribe(function (resData) {\n        console.log(resData);\n        _this.isLoading = false;\n\n        _this.router.navigate(['/recipes']);\n      }, function (errorMessage) {\n        console.log(errorMessage);\n        _this.error = errorMessage;\n\n        _this.showErrorAlert(errorMessage);\n\n        _this.isLoading = false;\n      });\n      form.reset();\n    }\n  }, {\n    key: \"onHandleError\",\n    value: function onHandleError() {\n      this.error = null;\n    }\n  }, {\n    key: \"ngOnDestroy\",\n    value: function ngOnDestroy() {\n      if (this.closeSub) {\n        this.closeSub.unsubscribe();\n      }\n    }\n  }, {\n    key: \"showErrorAlert\",\n    value: function showErrorAlert(message) {\n      var _this2 = this;\n\n      // const alertCmp = new AlertComponent();\n      var alertCmpFactory = this.componentFactoryResolver.resolveComponentFactory(AlertComponent);\n      var hostViewContainerRef = this.alertHost.viewContainerRef;\n      hostViewContainerRef.clear();\n      var componentRef = hostViewContainerRef.createComponent(alertCmpFactory);\n      componentRef.instance.message = message;\n      this.closeSub = componentRef.instance.close.subscribe(function () {\n        _this2.closeSub.unsubscribe();\n\n        hostViewContainerRef.clear();\n      });\n    }\n  }]);\n\n  return AuthComponent;\n}();\n\nAuthComponent.ɵfac = function AuthComponent_Factory(t) {\n  return new (t || AuthComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i0.ComponentFactoryResolver));\n};\n\nAuthComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AuthComponent,\n  selectors: [[\"app-auth\"]],\n  viewQuery: function AuthComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(PlaceholderDirective, 5);\n    }\n\n    if (rf & 2) {\n      var _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.alertHost = _t.first);\n    }\n  },\n  decls: 5,\n  vars: 2,\n  consts: [[\"appPlaceholder\", \"\"], [1, \"row\"], [1, \"col-xs-12\", \"col-md-6\", \"col-md-offset-3\"], [\"style\", \"text-align: center;\", 4, \"ngIf\"], [3, \"ngSubmit\", 4, \"ngIf\"], [2, \"text-align\", \"center\"], [3, \"ngSubmit\"], [\"authForm\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"ngModel\", \"\", \"name\", \"email\", \"required\", \"\", \"email\", \"\", 1, \"form-control\"], [\"for\", \"password\"], [\"type\", \"password\", \"id\", \"password\", \"ngModel\", \"\", \"name\", \"password\", \"required\", \"\", \"minlength\", \"6\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"]],\n  template: function AuthComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, AuthComponent_ng_template_0_Template, 0, 0, \"ng-template\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2);\n      i0.ɵɵtemplate(3, AuthComponent_div_3_Template, 2, 0, \"div\", 3);\n      i0.ɵɵtemplate(4, AuthComponent_form_4_Template, 16, 3, \"form\", 4);\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n    }\n  },\n  directives: [i3.PlaceholderDirective, i4.NgIf, i5.LoadingSpinnerComponent, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.NgForm, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgModel, i6.RequiredValidator, i6.EmailValidator, i6.MinLengthValidator],\n  encapsulation: 2\n});","map":{"version":3,"sources":["C:/ABC/Angular13/CourseProject/CourseProject-Ol/src/app/auth/auth.component.ts"],"names":["ComponentFactoryResolver","Router","AuthService","AlertComponent","PlaceholderDirective","i0","i1","i2","i3","i4","i5","i6","AuthComponent_ng_template_0_Template","rf","ctx","AuthComponent_div_3_Template","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","AuthComponent_form_4_Template","_r5","ɵɵgetCurrentView","ɵɵlistener","AuthComponent_form_4_Template_form_ngSubmit_0_listener","ɵɵrestoreView","_r3","ɵɵreference","ctx_r4","ɵɵnextContext","onSubmit","ɵɵtext","AuthComponent_form_4_Template_button_click_14_listener","ctx_r6","onSwitchMode","ctx_r2","ɵɵadvance","ɵɵproperty","valid","ɵɵtextInterpolate1","isLoginMode","AuthComponent","authService","router","componentFactoryResolver","isLoading","error","form","email","value","password","authObs","login","signup","subscribe","resData","console","log","navigate","errorMessage","showErrorAlert","reset","closeSub","unsubscribe","message","alertCmpFactory","resolveComponentFactory","hostViewContainerRef","alertHost","viewContainerRef","clear","componentRef","createComponent","instance","close","ɵfac","AuthComponent_Factory","t","ɵɵdirectiveInject","ɵcmp","ɵɵdefineComponent","type","selectors","viewQuery","AuthComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","decls","vars","consts","template","AuthComponent_Template","ɵɵtemplate","directives","NgIf","LoadingSpinnerComponent","ɵNgNoValidate","NgControlStatusGroup","NgForm","DefaultValueAccessor","NgControlStatus","NgModel","RequiredValidator","EmailValidator","MinLengthValidator","encapsulation"],"mappings":"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","sourcesContent":["import { ComponentFactoryResolver } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from './auth.service';\r\nimport { AlertComponent } from '../shared/alert/alert.component';\r\nimport { PlaceholderDirective } from '../shared/placeholder/placeholder.directive';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"./auth.service\";\r\nimport * as i2 from \"@angular/router\";\r\nimport * as i3 from \"../shared/placeholder/placeholder.directive\";\r\nimport * as i4 from \"@angular/common\";\r\nimport * as i5 from \"../shared/loading-spinner/loading-spinner.component\";\r\nimport * as i6 from \"@angular/forms\";\r\nfunction AuthComponent_ng_template_0_Template(rf, ctx) { }\r\nfunction AuthComponent_div_3_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 5);\r\n    i0.ɵɵelement(1, \"app-loading-spinner\");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction AuthComponent_form_4_Template(rf, ctx) { if (rf & 1) {\r\n    const _r5 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"form\", 6, 7);\r\n    i0.ɵɵlistener(\"ngSubmit\", function AuthComponent_form_4_Template_form_ngSubmit_0_listener() { i0.ɵɵrestoreView(_r5); const _r3 = i0.ɵɵreference(1); const ctx_r4 = i0.ɵɵnextContext(); return ctx_r4.onSubmit(_r3); });\r\n    i0.ɵɵelementStart(2, \"div\", 8)(3, \"label\", 9);\r\n    i0.ɵɵtext(4, \"E-Mail\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelement(5, \"input\", 10);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(6, \"div\", 8)(7, \"label\", 11);\r\n    i0.ɵɵtext(8, \"Password\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelement(9, \"input\", 12);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(10, \"div\")(11, \"button\", 13);\r\n    i0.ɵɵtext(12);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵtext(13, \" | \");\r\n    i0.ɵɵelementStart(14, \"button\", 14);\r\n    i0.ɵɵlistener(\"click\", function AuthComponent_form_4_Template_button_click_14_listener() { i0.ɵɵrestoreView(_r5); const ctx_r6 = i0.ɵɵnextContext(); return ctx_r6.onSwitchMode(); });\r\n    i0.ɵɵtext(15);\r\n    i0.ɵɵelementEnd()()();\r\n} if (rf & 2) {\r\n    const _r3 = i0.ɵɵreference(1);\r\n    const ctx_r2 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(11);\r\n    i0.ɵɵproperty(\"disabled\", !_r3.valid);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.isLoginMode ? \"Login\" : \"Sign Up\", \" \");\r\n    i0.ɵɵadvance(3);\r\n    i0.ɵɵtextInterpolate1(\" Switch to \", ctx_r2.isLoginMode ? \"Sign Up\" : \"Login\", \" \");\r\n} }\r\nexport class AuthComponent {\r\n    constructor(authService, router, componentFactoryResolver) {\r\n        this.authService = authService;\r\n        this.router = router;\r\n        this.componentFactoryResolver = componentFactoryResolver;\r\n        this.isLoginMode = true;\r\n        this.isLoading = false;\r\n        this.error = null;\r\n    }\r\n    onSwitchMode() {\r\n        this.isLoginMode = !this.isLoginMode;\r\n    }\r\n    onSubmit(form) {\r\n        if (!form.valid) {\r\n            return;\r\n        }\r\n        const email = form.value.email;\r\n        const password = form.value.password;\r\n        let authObs;\r\n        this.isLoading = true;\r\n        if (this.isLoginMode) {\r\n            authObs = this.authService.login(email, password);\r\n        }\r\n        else {\r\n            authObs = this.authService.signup(email, password);\r\n        }\r\n        authObs.subscribe(resData => {\r\n            console.log(resData);\r\n            this.isLoading = false;\r\n            this.router.navigate(['/recipes']);\r\n        }, errorMessage => {\r\n            console.log(errorMessage);\r\n            this.error = errorMessage;\r\n            this.showErrorAlert(errorMessage);\r\n            this.isLoading = false;\r\n        });\r\n        form.reset();\r\n    }\r\n    onHandleError() {\r\n        this.error = null;\r\n    }\r\n    ngOnDestroy() {\r\n        if (this.closeSub) {\r\n            this.closeSub.unsubscribe();\r\n        }\r\n    }\r\n    showErrorAlert(message) {\r\n        // const alertCmp = new AlertComponent();\r\n        const alertCmpFactory = this.componentFactoryResolver.resolveComponentFactory(AlertComponent);\r\n        const hostViewContainerRef = this.alertHost.viewContainerRef;\r\n        hostViewContainerRef.clear();\r\n        const componentRef = hostViewContainerRef.createComponent(alertCmpFactory);\r\n        componentRef.instance.message = message;\r\n        this.closeSub = componentRef.instance.close.subscribe(() => {\r\n            this.closeSub.unsubscribe();\r\n            hostViewContainerRef.clear();\r\n        });\r\n    }\r\n}\r\nAuthComponent.ɵfac = function AuthComponent_Factory(t) { return new (t || AuthComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i0.ComponentFactoryResolver)); };\r\nAuthComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: AuthComponent, selectors: [[\"app-auth\"]], viewQuery: function AuthComponent_Query(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵviewQuery(PlaceholderDirective, 5);\r\n    } if (rf & 2) {\r\n        let _t;\r\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.alertHost = _t.first);\r\n    } }, decls: 5, vars: 2, consts: [[\"appPlaceholder\", \"\"], [1, \"row\"], [1, \"col-xs-12\", \"col-md-6\", \"col-md-offset-3\"], [\"style\", \"text-align: center;\", 4, \"ngIf\"], [3, \"ngSubmit\", 4, \"ngIf\"], [2, \"text-align\", \"center\"], [3, \"ngSubmit\"], [\"authForm\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"ngModel\", \"\", \"name\", \"email\", \"required\", \"\", \"email\", \"\", 1, \"form-control\"], [\"for\", \"password\"], [\"type\", \"password\", \"id\", \"password\", \"ngModel\", \"\", \"name\", \"password\", \"required\", \"\", \"minlength\", \"6\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"]], template: function AuthComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵtemplate(0, AuthComponent_ng_template_0_Template, 0, 0, \"ng-template\", 0);\r\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2);\r\n        i0.ɵɵtemplate(3, AuthComponent_div_3_Template, 2, 0, \"div\", 3);\r\n        i0.ɵɵtemplate(4, AuthComponent_form_4_Template, 16, 3, \"form\", 4);\r\n        i0.ɵɵelementEnd()();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\r\n    } }, directives: [i3.PlaceholderDirective, i4.NgIf, i5.LoadingSpinnerComponent, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.NgForm, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgModel, i6.RequiredValidator, i6.EmailValidator, i6.MinLengthValidator], encapsulation: 2 });\r\n"]},"metadata":{},"sourceType":"module"}